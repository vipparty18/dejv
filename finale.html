<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GRAND FINALE</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Source Code Pro', monospace;
      background-color: #D32F2F;
      color: white;
      margin: 0;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      text-align: center;
    }

    h1 {
      font-size: 3rem;
      font-weight: 700;
      margin: 0 0 2rem 0;
      color: #FFEB3B;
    }

    .instructions {
      font-size: 1.2rem;
      margin-top: 1rem;
      color: #FFEB3B;
      line-height: 1.5;
      font-weight: 400;
    }

    .task-buttons {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 2rem;
    }

    .task-buttons button {
      padding: 1rem 2rem;
      background-color: #FF5722;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease;
    }

    .task-buttons button:hover {
      background-color: #D32F2F;
      transform: scale(1.05);
    }

    .input-section {
      margin-top: 4rem;
      width: 100%;
      max-width: 700px;
      background-color: #B71C1C;
      padding: 2rem;
      border-radius: 16px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    .input-section h2 {
      font-size: 1.6rem;
      color: #FFEB3B;
      margin-bottom: 1.5rem;
    }

    .input-group {
      display: flex;
      justify-content: space-between;
      margin-top: 1rem;
    }

    .input-group input {
      width: 45%;
      height: 3rem;
      font-size: 1.2rem;
      text-align: center;
      border: 2px solid #FFEB3B;
      border-radius: 8px;
      outline: none;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .input-group input:focus {
      border-color: #FF5722;
    }

    .location, .date, .time {
      font-size: 1.2rem;
      color: #FFEB3B;
    }

    .redirect-input {
      display: none;
      margin-top: 1rem;
      width: 100%;
      max-width: 300px;
    }

    .redirect-input input {
      width: 100%;
      height: 3rem;
      font-size: 1.2rem;
      text-align: center;
      border: 2px solid #FFEB3B;
      border-radius: 8px;
      outline: none;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .redirect-input input:focus {
      border-color: #FF5722;
    }
  </style>
</head>
<body>
  <h1>GRAND FINALE!</h1>
  <div class="instructions">
    <p>Vitaj na záverečnom kole našich úloh! Tvoja úloha je jednoduchá: splň každú zadanú úlohu, zadaj správne odpovede a priprav sa na prekvapenie, ktoré ťa čaká!</p>
    <p>Vyrieš všetky úlohy a zistíš, kde ťa čaká oslava!</p>
  </div>

  <div class="task-buttons">
    <a href="uloha1.html"><button>Úloha 1</button></a>
    <button id="showRedirectInputButton">Úloha 2</button>
    <button id="showRedirectInputButton3">Úloha 3</button>
  </div>

  <div class="redirect-input">
    <input type="search" id="redirectInput" placeholder="Zadaj heslo a stlač Enter" />
  </div>

  <div class="input-section">
    <h2>Na svoju VIP oslavu sa dostav:</h2>
    <div class="input-group">
      <input type="text" id="answer1" placeholder="heisenberg313" oninput="generateDate(); checkCaproni();" />
      <span id="date1" class="date">Dátum: </span>
    </div>
    <div class="input-group">
      <input type="text" id="answer2" placeholder="12" oninput="generateTime(); checkCaproni()" />
      <span id="time2" class="time">Čas: </span>
    </div>
    <div class="input-group">
      <input type="text" id="answer3" placeholder="deus in machina" oninput="generateLocation(); checkCaproni()" />
      <span id="location3" class="location">Lokalita: </span>
    </div>
    <div class="input-group">
      <input type="text" id="answer4" placeholder="" oninput="checkCaproni()" />
      <span id="info4" class="location">?</span>
    </div>
  </div>

  <script>
    const locations = ["Bratislava", "Košice", "Prešov", "Nitra", "Trnava", "Žilina", "Trenčín", "Martin", "Poprad", "Banská Bystrica", "Prievidza", "Komárno", "Humenné", "Zvolen", "Levice"];

    function generateDate() {
      const randomDate = new Date();
      randomDate.setDate(randomDate.getDate() + Math.floor(Math.random() * 30));
      const dateString = randomDate.toLocaleDateString();
      document.getElementById("date1").textContent = `Dátum: ${dateString}`;
    }

    function generateTime() {
      const randomHour = Math.floor(Math.random() * 24);
      const randomMinute = Math.floor(Math.random() * 60);
      const timeString = `${randomHour.toString().padStart(2, '0')}:${randomMinute.toString().padStart(2, '0')}`;
      document.getElementById("time2").textContent = `Čas: ${timeString}`;
    }

    function generateLocation() {
      const randomLocation = locations[Math.floor(Math.random() * locations.length)];
      document.getElementById("location3").textContent = `Lokalita: ${randomLocation}`;
    }

    document.getElementById("showRedirectInputButton").addEventListener("click", function() {
      document.querySelector(".redirect-input").style.display = "block";
    });

    document.getElementById("showRedirectInputButton3").addEventListener("click", function() {
      document.querySelector(".redirect-input").style.display = "block";
    });

    document.getElementById("redirectInput").addEventListener("keydown", function(event) {
        if (event.key === "Enter") {
            event.preventDefault(); // Zabráň preskočeniu na ďalší riadok
            const value = event.target.value.trim();
    
            if (value.toLowerCase() === "heisenberg313") {
                window.open("uloha22.html", "_blank");
                const link = document.createElement("a");
                link.href = "heisenberg.png";
                link.download = "heisenberg.png";
                link.click();
            } else if (value.toLowerCase() === "12") {
                window.open("ulohatrii.html", "_blank");
            }
        }
    });


    function checkCaproni() {
          const input1 = document.getElementById("answer1").value.trim().toLowerCase();
          const input2 = document.getElementById("answer2").value.trim();
          const input3 = document.getElementById("answer3").value.trim().toLowerCase();
          const input4 = document.getElementById("answer4").value.trim().toLowerCase();
          
          if (
              input1 === "heisenberg313" &&
              input2 === "12" &&
              input3 === "deus in machina" &&
              /caproni[\s\-]?ca[\s\-]?33/i.test(input4)
          ) {
              const now = new Date();
              const hours = String(now.getHours()).padStart(2, "0");
              const minutes = String(now.getMinutes()).padStart(2, "0");
              const formattedTime = `${hours}:${minutes}`;
              
              const gmtPlus1Date = new Date(now.getTime() + 1 * 60 * 60 * 1000); // GMT+1 adjustment
              document.getElementById("date1").textContent = `Dátum: ${gmtPlus1Date.toLocaleDateString()}`;
              document.getElementById("time2").textContent = `Čas: ${formattedTime}`;
              document.getElementById("location3").textContent = "Lokalita: Letisko M.R. Štefánika";
              document.getElementById("info4").textContent = "2. poschodie";
          } else {
              // Generate random date, time, and location if the condition is false
              generateRandomDate();
              generateRandomTime();
              generateRandomLocation();
              document.getElementById("info4").textContent = "";  // Clear info for the wrong answers
          }
      }
      
      function generateRandomDate() {
          const randomDate = new Date();
          randomDate.setDate(randomDate.getDate() + Math.floor(Math.random() * 30)); // Random day within the next 30 days
          const dateString = randomDate.toLocaleDateString();
          document.getElementById("date1").textContent = `Dátum: ${dateString}`;
      }
      
      function generateRandomTime() {
          const randomHour = Math.floor(Math.random() * 24);
          const randomMinute = Math.floor(Math.random() * 60);
          const timeString = `${randomHour.toString().padStart(2, '0')}:${randomMinute.toString().padStart(2, '0')}`;
          document.getElementById("time2").textContent = `Čas: ${timeString}`;
      }
      
      function generateRandomLocation() {
          const randomLocation = locations[Math.floor(Math.random() * locations.length)];
          document.getElementById("location3").textContent = `Lokalita: ${randomLocation}`;
      }

  </script>
</body>
</html>
